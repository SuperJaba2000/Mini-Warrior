<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Mini|Warriors</title>
        <link rel="stylesheet" href="assets/gameStyle.css">
    </head>
    <body>
		<canvas id="world"></canvas>
		<a id="version" align="left"></a><br>
		<a id="coordinates" align="left"></a>
		<canvas id="inventory"></canvas>
		
		<script src="arc/Vars.js"></script>
		<script src="arc/Graphic.js"></script>
		<script src="arc/Control.js"></script>
		
		<script src='util/random.js'></script>
		<script src='util/noise.js'></script>
		<script src='util/generator.js'></script>
		
		<script src='content/blocks.js'></script>
		<script src='content/map.js'></script>
		<script src='content/player.js'></script>

		<script>
		
		    const worldDraw = world.getContext("2d");
            const inventoryDraw = inventory.getContext("2d");
			
			let pMap = new Map("test", 101, 221, 12345, gameVersion);
			world.height = Math.min(screenSize.height * Settings.debug.tileSize, pMap.tiles.length * Settings.debug.tileSize);
			world.width = Math.min(screenSize.width * Settings.debug.tileSize, pMap.tiles[0].length * Settings.debug.tileSize); 
			pMap.tiles[5][5].block = grassBlock
		
                    /// /// /// /// /// /// /// /// /// /// /// /// /// 
		    /// /// /// /// /// /// /// /// /// /// /// /// /// 
		    /// /// /// /// /// /// /// /// /// /// /// /// ///
			
            function save(){
                let file = new Blob([JSON.stringify(pMap, null, 2)], {type: 'text/plain'});
                /*save.href = URL.createObjectURL(file);*/
				return file;
			}
			
			function changePause(){
				Settings.debug.pause = Settings.debug.pause ? false : true;
			}
			
			function menu(){
			    const menu = window.open('../index.html','Menu');
                window.close()
			}
			
                    /// /// /// /// /// /// /// /// /// /// /// /// /// 
		    /// /// /// /// /// /// /// /// /// /// /// /// /// 
		    /// /// /// /// /// /// /// /// /// /// /// /// ///
			
			/*function update() {
			
			    if(!pause){
				
				setStyles();
				
				quantHeight = map.tiles.length, quantWidth = map.tiles[0].length;
				
			    world.height = quantHeight * tileSize;
			    world.width = quantWidth * tileSize;
			
			    //clear canvas
                worldDraw.clearRect(0, 0, world.width, world.height)
				inventoryDraw.clearRect(0, 0, inventory.width, inventory.height)

                //draw new
				drawInventoryLine()
                drawTiles()
				
                drawPlayer()
				
				}
            }*/
			
		    
			
		function update() {
			version.innerHTML = "Version: " + gameVersion;
			
			if(!Settings.debug.pause){
				
				pMap.player.x = pTile().x;
				pMap.player.y = pTile().y;
			}
			coordinates.innerHTML = "x: " + pMap.player.x + " y: " + pMap.player.y;
                }

                let intervalUpdate = setInterval(() => update(), 1);
		draw();
			
		</script>
    </body>
</html>