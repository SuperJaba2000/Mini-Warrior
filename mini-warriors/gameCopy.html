<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Mini|Warriors</title>
        <link rel="stylesheet" href="assets/gameStyle.css">
    </head>
    <body>
		<canvas id="world"></canvas>
		<canvas id="inventory"></canvas>
		<a id="debug" align="left"></a>
		
		<script src='util/random.js'></script>
		<script src='util/perlin.js'></script>
		<script src='util/generator.js'></script>
		
		<script src='content/blocks.js'></script>
		<script src='content/map.js'></script>
		<script src='content/player.js'></script>

		<script>
		
		    const gameVersion = "PC-0.01"
		    debug.innerHTML = "Version: " + gameVersion;
		
		    const worldDraw = world.getContext("2d");
		    const inventoryDraw = inventory.getContext("2d");

            const Settings = {
		        graphics: {
			        useTextures: false,
			    },

                debug: {
			        tileSize: 64,
				    pause: false,
			    },
		    }, n = null;
			
			let pMap = new Map("test", 20, 20, gameVersion);
		
            /// /// /// /// /// /// /// /// /// /// /// /// /// 
		    /// /// /// /// /// /// /// /// /// /// /// /// /// 
		    /// /// /// /// /// /// /// /// /// /// /// /// ///
			
            function save(){
                let file = new Blob([JSON.stringify(pMap, null, 2)], {type: 'text/plain'});
                /*save.href = URL.createObjectURL(file);*/
				return file;
			}
			
			function getTile(x, y) {
                return pMap.tiles[y - 1][x - 1];
            }
			
			function getTileInfo(tile){
			
			    const info = {
				
				    hasBlock: tile.block !== null ? true : false,
					stillDrawFloor: this.hasBlock ? tile.block.stillDrawFloor : false,
					
					canWalk: !this.hasBlock && tile.floor.canWalk ? true : false,
					
					speedMultiplier: this.canWalk ? tile.floor.speedMultiplier : 0,
				};
				
				return info;
			}
			
			function changePause(){
				Settings.debug.pause = Settings.debug.pause ? false : true;
			}
			
			function changeMap(map){
			    pMap = map;
				
				world.width = pMap.width * Settings.debug.tileSize;
				world.height = pMap.height * Settings.debug.tileSize;
			}
            
		</script>
    </body>
</html>